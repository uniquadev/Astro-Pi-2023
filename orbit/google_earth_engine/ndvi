// Define the ROI bounding box
var roi = ee.Geometry.Rectangle([13, 73, 18, 78]); // Replace with your bounding box coordinates

// Define the month of interest
var year = 2022;  // Replace with your desired year
var month = 4;    // Replace with your desired month

// Filter the Sentinel-2 Level-2A collection by month and region
var collection = ee.ImageCollection('COPERNICUS/S2_SR')
  .filter(ee.Filter.calendarRange(year, year, 'year'))
  .filter(ee.Filter.calendarRange(month, month, 'month'))
  .filterBounds(roi)
  .select(['B8', 'B4']);  // Select the necessary spectral bands for NDVI calculation ('B8' and 'B4')

// Define a function to calculate NDVI for an image
var calculateNDVI = function(image) {
  var ndvi = image.normalizedDifference(['B8', 'B4']).rename('NDVI');
  return image.addBands(ndvi);
};

// Map the NDVI calculation function over the collection
var ndviCollection = collection.map(calculateNDVI);

// Calculate the mean NDVI over the region of interest
var meanNdvi = ndviCollection.mean();

// Get the mean NDVI value
var meanNdviValue = meanNdvi.reduceRegion({
  reducer: ee.Reducer.mean(),
  geometry: roi,
  scale: 1000,  // Set a coarser scale for aggregation
  maxPixels: 1e13,  // Set a higher limit for maxPixels
  bestEffort: true  // Aggregate at whatever scale results in maxPixels total pixels
}).get('NDVI');

// Check if the mean NDVI value exists
if (meanNdviValue !== null) {
  // Print the mean NDVI value
  print('Mean NDVI:', meanNdviValue);
} else {
  print('No valid NDVI values found in the specified region and month.');
}
